(this["webpackJsonpreact-proj-01"]=this["webpackJsonpreact-proj-01"]||[]).push([[6],{235:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var s=r(58);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],s=!0,n=!1,a=void 0;try{for(var c,o=e[Symbol.iterator]();!(s=(c=o.next()).done)&&(r.push(c.value),!t||r.length!==t);s=!0);}catch(i){n=!0,a=i}finally{try{s||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||Object(s.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},237:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return n}));var s=function(e){if(!e)return"Field is required!"},n=function(e){return function(t){if(!(t&&t.length<=e))return"Fields length more then ".concat(e," symbols")}}},238:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var s=r(3),n=r(236),a=(r(0),r(239)),c=r.n(a),o=r(1),i=["input","meta"],u=function(e){return function(t){var r=t.input,a=t.meta,u=a.touched,m=a.error,d=Object(n.a)(t,i),f=u&&m;return Object(o.jsxs)("div",{className:"".concat(c.a.formGroup," ").concat(f?c.a.error:""),children:[Object(o.jsx)(e,Object(s.a)(Object(s.a)({className:c.a.formControl},r),d)),f?Object(o.jsx)("div",{className:c.a.formGroupErrors,children:Object(o.jsx)("p",{children:m})}):""]})}}},239:function(e,t,r){e.exports={formGroup:"FormControls_formGroup__2xi7S",formGroupErrors:"FormControls_formGroupErrors__1oEpX",error:"FormControls_error__3Nz9m",formControl:"FormControls_formControl__ETq1M"}},240:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var s=r(43),n=function(e){return function(t,r){return r(Object(s.a)(e))}}},249:function(e,t,r){e.exports={messages:"Messages_messages__34Qfz",messagesList:"Messages_messagesList__QQ6W2",currentUser:"Messages_currentUser__23MjJ"}},250:function(e,t,r){"use strict";var s=r(251),n=r.n(s),a=r(1);t.a=function(e){return Object(a.jsx)("div",{className:n.a.item,children:Object(a.jsx)("p",{children:e.message.message})})}},251:function(e,t,r){e.exports={item:"Message_item__6jcHk",itemInner:"Message_itemInner__2Hz0m"}},252:function(e,t,r){"use strict";r(0);var s=r(253),n=r.n(s),a=r(110),c=r(111),o=r(238),i=r(237),u=r(240),m=r(1),d=Object(i.a)(100),f=Object(o.a)("textarea"),l="addMessageForm";t.a=Object(c.a)({form:l,onSubmitSuccess:Object(u.a)(l)})((function(e){var t=e.handleSubmit,r=e.isDisableSubmit,s=void 0!==r&&r;return Object(m.jsx)("form",{className:n.a.messageCreator,onSubmit:t,children:Object(m.jsxs)("div",{className:n.a.messageCreatorWrapper,children:[Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)(a.a,{name:"newMessageBody",component:f,validate:[i.b,d]})}),Object(m.jsx)("div",{className:"form-group justify-content-end",children:Object(m.jsx)("button",{className:"btn-custom__accent",disabled:s,children:"Send"})})]})})}))},253:function(e,t,r){e.exports={messageCreator:"AddMessageForm_messageCreator__38t3N",messageCreatorWrapper:"AddMessageForm_messageCreatorWrapper__3D-KH",title:"AddMessageForm_title__1Auxh",formControl:"AddMessageForm_formControl__2Cc_W"}},326:function(e,t,r){e.exports={chatMessageItem:"ChatPage_chatMessageItem__GWWB3",userInfo:"ChatPage_userInfo__2F_KA",currentUser:"ChatPage_currentUser__1Qnwe",chatMessageItemInner:"ChatPage_chatMessageItemInner__17AcZ"}},329:function(e,t,r){"use strict";r.r(t);var s=r(235),n=r(0),a=r(16),c=r(75),o=r(250),i=r(249),u=r.n(i),m=r(252),d=r(57),f=r(326),l=r.n(f),j=r(1),b=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),_=function(){var e=Object(n.useState)("pending"),t=Object(s.a)(e,2),r=t[0],o=t[1],i=Object(a.d)((function(e){return e.chat.messages})),u=Object(a.c)(),m=Object(a.d)((function(e){return e.auth.userId}));Object(n.useEffect)((function(){b.addEventListener("open",(function(){o("ready")}))}),[]),Object(n.useEffect)((function(){b.addEventListener("message",(function(e){u(c.a.setMessages(JSON.parse(e.data)))}))}),[]);return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(g,{messages:i,sendMessage:function(e){e&&b.send(e)},readyStatus:r,authUserId:m})})},g=function(e){var t=e.readyStatus,r=e.messages,s=e.sendMessage,n=e.authUserId,a=r.map((function(e,t){return Object(j.jsx)("div",{className:"".concat(l.a.chatMessageItem," ").concat(e.userId===n&&l.a.currentUser),children:Object(j.jsxs)("div",{className:l.a.chatMessageItemInner,children:[Object(j.jsxs)("div",{className:l.a.userInfo,children:[Object(j.jsx)(d.a,{path:e.photo,url:"/profile/".concat(e.userId)}),Object(j.jsx)("p",{children:e.userName})]}),Object(j.jsx)(o.a,{message:e},t)]})})}));return console.log("ready"===t),Object(j.jsxs)("div",{className:u.a.messages,children:[Object(j.jsxs)("div",{className:u.a.messagesList,children:[" ",a," "]}),Object(j.jsx)(m.a,{onSubmit:function(e){s(e.newMessageBody)},isDisableSubmit:"ready"!==t})]})};t.default=function(){return Object(j.jsx)(_,{})}}}]);
//# sourceMappingURL=6.fcd73979.chunk.js.map